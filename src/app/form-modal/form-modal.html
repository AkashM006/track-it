@if(categoriesObject().status === 'loading') {
<app-loader />
} @else if(categoriesObject().status === 'error') {
<app-modal (close)="onClose()" class="error">
  <h3 class="title">Whoops!</h3>
  <p class="content">{{ categoriesObject().error }}</p>
</app-modal>
} @else {
<app-modal (close)="onClose()">
  <h3 class="title">Add New Expense</h3>
  <form class="form" #newExpenseForm="ngForm" (ngSubmit)="onSubmit(); newExpenseForm.reset()">
    <div class="form-group">
      <label for="expense-name">Expense Name</label>
      <div class="form-input">
        <input
          type="text"
          name="expense-name"
          id="expense-name"
          placeholder="Coffee, lunch, gas..."
          required
          [(ngModel)]="expenseForm().name"
        />
      </div>
    </div>

    <div class="form-group">
      <label for="expense-date">Date</label>
      <div class="form-input">
        <input
          type="date"
          name="expense-date"
          id="expense-date"
          [value]="expenseForm().date"
          (input)="setDate($event)"
          required
        />
      </div>
    </div>

    <div class="form-group">
      <label for="expense-amount">Amount</label>
      <div class="form-input">
        <span class="prefix">$</span>
        <input
          type="number"
          name="expense-amount"
          id="expense-amount"
          placeholder="0.00"
          required
          [(ngModel)]="expenseForm().amount"
        />
      </div>
    </div>

    <div class="form-group">
      <label for="expense-category">Category</label>
      <div class="categories-container">
        @for(category of categories(); track category.id) {
        <button
          type="button"
          class="category-item"
          [class.selected]="expenseForm().selectedCategory.id === category.id"
          (click)="onSelectCategory(category)"
        >
          <!-- <ng-icon class="icon" [name]="category.iconName" /> -->
          <p>{{ category.name }}</p>
        </button>
        }
      </div>
    </div>

    <div class="btns-container">
      <button type="button" class="btn btn-secondary" (click)="onClose()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="!newExpenseForm.form.valid">
        Submit
      </button>
    </div>
  </form>
</app-modal>
}

<!-- Show Loader when actions are loading -->
@if(addExpenseMutation.state().status === 'loading') {
<app-loader />
}
